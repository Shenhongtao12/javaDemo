{"version":3,"sources":["redux/reducer/user.ts","redux/reducer/index.ts","redux/store.ts","images/logo.png","pages/login.tsx","redux/action/user.ts","pages/home.tsx","App.tsx","index.tsx"],"names":["init","combineReducers","user","state","action","type","createStore","reducer","applyMiddleware","thunk","Login","useState","initWidth","changeWidth","username","changeUsername","password","changPwd","dispatch","useDispatch","history","useHistory","useEffect","getInitWidth","document","body","clientWidth","style","width","mode","src","logo","height","alt","clear","placeholder","onChange","e","onClick","axios","post","then","response","getInfo","data","push","success","catch","error","fail","msg","margin","borderRadius","Home","checked","changeCheck","checkedEmail","changeCheckEmail","emailInput","changeEmailInput","useSelector","initDate","member","sendEmail","email","icon","onLeftClick","goBack","marqueeProps","loop","padding","Item","extra","id","value","test","App","path","component","from","to","ReactDOM","render","store","getElementById"],"mappings":"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","file":"static/js/main.edf17149.chunk.js","sourcesContent":["const init = {}\r\n\r\nexport default (state = init,action : any) => {\r\n    switch (action.type) {\r\n        case \"userInfo\" :\r\n            return action.user\r\n        default :\r\n            return state\r\n    }\r\n}","import {combineReducers} from 'redux'\r\nimport user from \"./user\";\r\n\r\nexport default combineReducers({\r\n    user\r\n})","import {createStore,applyMiddleware,compose} from 'redux'\r\nimport thunk from 'redux-thunk'\r\nimport reducer from './reducer'\r\n\r\nexport default createStore(reducer,applyMiddleware(thunk))\r\n","export default __webpack_public_path__ + \"static/media/logo.556bb70b.png\";","import React, {useState, useEffect,useReducer} from 'react';\r\nimport {useDispatch,useSelector} from 'react-redux'\r\nimport {getInfo} from '../redux/action/user'\r\nimport {List, InputItem, Button, Toast, Icon, NavBar} from 'antd-mobile';\r\nimport axios from 'axios'\r\nimport {useHistory} from 'react-router-dom'\r\nimport logo from '../images/logo.png'\r\n\r\n\r\nconst Login: React.FC<{}> = () => {\r\n    const [initWidth, changeWidth] = useState<any>()\r\n    const [username, changeUsername] = useState<string>()\r\n    const [password, changPwd] = useState<string>()\r\n    const dispatch = useDispatch();\r\n    let history = useHistory();\r\n\r\n    useEffect(() => {\r\n        getInitWidth()\r\n    })\r\n\r\n    const getInitWidth = () => {\r\n        changeWidth(document.body.clientWidth)\r\n    }\r\n\r\n    const login = () => {\r\n        axios.post('api/user/login', {\r\n            username,\r\n            password,\r\n        }).then(function (response) {\r\n            dispatch(getInfo(response.data.data))\r\n            history.push(\"/home\");\r\n            Toast.success('登陆成功', 1);\r\n        }).catch(function (error) {\r\n            Toast.fail(error.response.data.msg, 1);\r\n        });\r\n    }\r\n\r\n\r\n    return (\r\n        <div style={{width: initWidth}}>\r\n            <NavBar\r\n                mode=\"light\"\r\n            >日报辅助系统</NavBar>\r\n            <img src={logo} style={{height: 100, width: initWidth}} alt=\"logo\"/>\r\n            <List>\r\n                <InputItem\r\n                    clear\r\n                    placeholder=\"请输入你的学号\"\r\n                    onChange={(e) => changeUsername(e)}\r\n                >学号</InputItem>\r\n                <InputItem\r\n                    type='password'\r\n                    clear\r\n                    placeholder=\"请输入你的密码\"\r\n                    onChange={(e) => changPwd(e)}\r\n                >密码</InputItem>\r\n            </List>\r\n            <Button\r\n                onClick={login}\r\n                type=\"primary\"\r\n                style={{margin: 20, borderRadius: 20}}>\r\n                登录\r\n            </Button>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Login","export const getInfo = (user : object) => {\r\n    return (dispatch : any) => {\r\n        dispatch({\r\n            type: 'userInfo',\r\n            user\r\n        })\r\n    }\r\n}","import React, {useState, useEffect} from 'react'\r\nimport {InputItem, List, Switch, Toast, NoticeBar, Button,NavBar,Icon} from 'antd-mobile';\r\nimport logo from \"../images/logo.png\";\r\nimport {useSelector} from \"react-redux\";\r\nimport {useHistory} from 'react-router-dom'\r\nimport axios from \"axios\";\r\n\r\n\r\nconst Home: React.FC<{}> = () => {\r\n    const [initWidth, changeWidth] = useState<any>()\r\n    const [checked, changeCheck] = useState<boolean>()\r\n    const [checkedEmail, changeCheckEmail] = useState<boolean>()\r\n    const [emailInput,changeEmailInput] = useState<any>()\r\n    const state: any = useSelector(state => state);\r\n    let history = useHistory();\r\n\r\n    useEffect(() => {\r\n        getInitWidth()\r\n        initDate()\r\n    },[])\r\n\r\n    const initDate = () => {\r\n        changeCheck(state.user.member)\r\n        changeCheckEmail(state.user.sendEmail)\r\n        const email = state.user.email === null ? '' : state.user.email\r\n        changeEmailInput(email)\r\n    }\r\n\r\n    const getInitWidth = () => {\r\n        changeWidth(document.body.clientWidth)\r\n    }\r\n\r\n    const changeAuto = () => {\r\n        if (!checked) {\r\n            axios.post('api/user/update', {\r\n                id:state.user.id,\r\n                member: true\r\n            }).then(function (response) {\r\n                Toast.success('开启自动打卡', 1);\r\n                changeCheck(true)\r\n            }).catch(function (error) {\r\n                Toast.fail(error.response.data.msg, 1);\r\n            });\r\n        } else {\r\n            axios.post('api/user/update', {\r\n                id:state.user.id,\r\n                member: false\r\n            }).then(function (response) {\r\n                Toast.success('关闭自动打卡', 1);\r\n                changeCheck(false)\r\n            }).catch(function (error) {\r\n                Toast.fail(error.response.data.msg, 1);\r\n            });\r\n        }\r\n\r\n    }\r\n\r\n    const changeEmail = () => {\r\n        if (!checkedEmail) {\r\n            axios.post('api/user/update', {\r\n                id:state.user.id,\r\n                sendEmail: true\r\n            }).then(function (response) {\r\n                Toast.success('开启邮件提醒', 1);\r\n                changeCheckEmail(true)\r\n            }).catch(function (error) {\r\n                Toast.fail(error.response.data.msg, 1);\r\n            });\r\n        } else {\r\n            axios.post('api/user/update', {\r\n                id:state.user.id,\r\n                sendEmail: false\r\n            }).then(function (response) {\r\n                Toast.success('关闭邮件提醒', 1);\r\n                changeCheckEmail(false)\r\n\r\n            }).catch(function (error) {\r\n                Toast.fail(error.response.data.msg, 1);\r\n            });\r\n        }\r\n\r\n    }\r\n\r\n    const updateEmail = () => {\r\n        if (!(/^[a-zA-Z0-9.!#$%&'*+\\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(emailInput))) {\r\n            Toast.fail('请输入正确邮箱', 1);\r\n        } else {\r\n            axios.post('api/user/update', {\r\n                id:state.user.id,\r\n                email: emailInput\r\n            }).then(function (response) {\r\n                Toast.success('保存邮箱成功', 1);\r\n            }).catch(function (error) {\r\n                Toast.fail(error.response.data.msg, 1);\r\n            });\r\n        }\r\n\r\n    }\r\n\r\n\r\n    return (\r\n        <div style={{width: initWidth}}>\r\n            <NavBar\r\n                mode=\"light\"\r\n                icon={<Icon type=\"left\" />}\r\n                onLeftClick={() => history.goBack()}\r\n            >日报辅助系统</NavBar>\r\n            <NoticeBar marqueeProps={{ loop: true, style: { padding: '0 7.5px' } }}>\r\n                若不选择邮件提醒时，打卡失败则会发送邮件，打卡失败请联系管理员，邮件下方有联系方式\r\n            </NoticeBar>\r\n            <img src={logo} style={{height: 100, width: initWidth}} alt=\"logo\"/>\r\n            <List>\r\n                <List.Item\r\n                    extra={<Switch\r\n                        checked={checked}\r\n\r\n                        onChange={changeAuto}\r\n                    />}\r\n                >自动打卡</List.Item>\r\n                <List.Item\r\n                    extra={<Switch\r\n                        checked={checkedEmail}\r\n                        onChange={changeEmail}\r\n                    />}\r\n                >邮件提醒</List.Item>\r\n\r\n                <InputItem\r\n                    clear\r\n                    placeholder=\"请输入你的收件邮箱\"\r\n                    value={emailInput}\r\n                    onChange={(e) => changeEmailInput(e)}\r\n                >邮箱</InputItem>\r\n            </List>\r\n\r\n            <Button\r\n                onClick={updateEmail}\r\n                type=\"primary\"\r\n                style={{margin: 20, borderRadius: 20}}>\r\n                保存邮箱\r\n            </Button>\r\n\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Home","import React from 'react';\nimport {Switch, Route, Redirect, BrowserRouter} from 'react-router-dom'\nimport Login from './pages/login'\nimport Home from './pages/home'\n\nfunction App() {\n    return (\n        <BrowserRouter>\n        <Switch>\n                <Route path='/login' component={Login}/>\n                <Route path='/home' component={Home}/>\n                <Redirect from=\"/\" to=\"login\"/>\n            </Switch>\n        </BrowserRouter>\n    );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport {Provider} from 'react-redux'\nimport store from \"./redux/store\";\nimport App from './App';\n\nReactDOM.render(\n    <Provider store={store}>\n        <App/>\n    </Provider>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}